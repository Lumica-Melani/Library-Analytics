import{r as n,j as e,u as m,a as g,d as f,e as p,c as j,s as b,f as w,g as N}from"./index-D8nwOLRk.js";import{g as v}from"./viewTracker-9gtdqBRx.js";function y({book:s}){return n.useEffect(()=>{v(s.id)},[s.id]),e.jsxs("div",{className:"rounded-xl overflow-hidden bg-neutral-900 shadow-lg hover:-translate-y-1 transition",children:[e.jsx("img",{src:s.bookUrl,alt:s.title,className:"h-72 w-full object-contain bg-black rounded-t-xl"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.title}),e.jsx("p",{className:"text-sm opacity-70",children:s.author}),e.jsxs("div",{className:"flex justify-between mt-3 text-sm",children:[e.jsxs("span",{children:["⭐ ",s.rating]}),e.jsxs("span",{children:["❤️ ",s.likes]})]})]})]})}function C(){const{genre:s}=m(),r=g(),[,c]=f(),{items:u,search:o,sort:i,loading:x}=p(t=>t.books),[l,h]=n.useState(o),d=j.some(t=>t.genre.toLowerCase()===s.toLowerCase());return n.useEffect(()=>{const t=setTimeout(()=>{r(b(l)),c(a=>(l?a.set("search",l):a.delete("search"),a))},300);return()=>clearTimeout(t)},[l,r,c]),n.useEffect(()=>{d&&r(w({genre:s,search:o,sort:i}))},[s,o,i,r,d]),d?e.jsxs("section",{className:"px-6 py-10",children:[e.jsxs("h1",{className:"text-4xl font-semibold capitalize mb-10 text-center",children:[s," Books"]}),e.jsxs("div",{className:"flex flex-col gap-4 mb-12 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("input",{type:"text",placeholder:"Search by author or book title",value:l,onChange:t=>h(t.target.value),className:`w-full sm:max-w-md px-4 py-2 rounded-lg bg-[#0f1f21]\r
            text-[#e6e9e3] placeholder:text-[#8fa3a1]\r
            border border-[#1e3a3c]\r
            focus:outline-none focus:ring-2 focus:ring-[#c6b27c]`}),e.jsxs("select",{value:i,onChange:t=>{r(N(t.target.value)),c(a=>(t.target.value?a.set("sort",t.target.value):a.delete("sort"),a))},className:`w-full sm:w-56 px-4 py-2 rounded-lg bg-[#0f1f21]\r
            text-[#e6e9e3] border border-[#1e3a3c]\r
            focus:outline-none focus:ring-2 focus:ring-[#c6b27c]`,children:[e.jsx("option",{value:"",children:"Sort By:"}),e.jsx("option",{value:"az",children:"Alphabetical (A–Z)"}),e.jsx("option",{value:"rating-high",children:"Rating: High → Low"}),e.jsx("option",{value:"rating-low",children:"Rating: Low → High"})]})]}),x?e.jsx("p",{className:"text-center animate-pulse text-[#8fa3a1]",children:"Loading books…"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(t=>e.jsx(y,{book:t},t.id))})]}):e.jsxs("section",{className:"min-h-[70vh] flex flex-col items-center justify-center text-center px-6",children:[e.jsx("h1",{className:"text-6xl font-bold mb-4",children:"404"}),e.jsxs("p",{className:"text-lg text-[#8fa3a1]",children:['The genre "',s,'" does not exist.']})]})}export{C as default};
